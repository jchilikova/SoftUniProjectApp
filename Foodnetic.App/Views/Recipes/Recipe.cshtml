@{
    ViewData["Title"] = "Recipe";
    Layout = "~/Views/Shared/_SecondaryLayout.cshtml";
}
@using Foodnetic.ViewModels.Recipes
@model Foodnetic.ViewModels.Recipes.RecipeViewModel

<style>
    .checked {
        color: orange;
    }
</style>

<body>
    <header>
        @{
            await Html.RenderPartialAsync("_DefaultNavbarPartial");
        }
    </header>
    <div class="intro-text text-center">
        <h1 class="intro-lead-in mb-4 mt-4">@Model.Name</h1>
        <hr class="hr-green" />
    </div>
    <div class="row d-flex justify-content-between">
        <div class="col-md-4">
            <img src="@Model.PictureUrl" class="img-thumbnail" />
            <div class="my-3 text-center d-flex justify-content-around">
                <i class="fa fa-clock" aria-hidden="true"> Preparation: @Model.PreparationTime mins</i>
                <i class="fas fa-calendar-minus"> Cook: @Model.CookTime mins</i>
                <i class="fas fa-chart-pie">Servings: @Model.NumberOfServings</i>
            </div>
            <div class="text-center">
                @for (int j = 0; j < Math.Truncate(@Model.Rating); j++)
                {
                    <span class="fa fa-star checked"></span>
                }
                @if (Model.Rating % 1 == 0)
                {
                    for (int j = 0; j < 5 - Math.Truncate(Model.Rating); j++)
                    {
                        <span class="fa fa-star"></span>
                    }
                }
                else
                {
                    <span class="fa fa-star-half checked"></span>
                    for (int j = 0; j < 5 - (Math.Truncate(Model.Rating) + 1); j++)
                    {
                        <span class="fa fa-star"></span>
                    }
                }
            </div>
            <div class="text-center my-2">
                <h4>Description</h4>
                <h5>@Model.Description</h5>
            </div>
        </div>
        <div class="col-md-3 text-center">
            <h4 class="mb-4">Ingredients</h4>
            @{
                await Html.RenderPartialAsync("_RecipeIngredientsPartial", Model.IngredientsViewModel);
            }
        </div>
        <div class="col-md-5 text-center">
            <h4 class="mb-4">Directions</h4>
            <h5>@Model.Directions</h5>
        </div>
    </div>
<hr class="hr-green" />
<div class="text-center container my-5">
    <h4 class="my-5">Comments</h4>
    <form method="post" asp-controller="Comments" asp-action="Create">
        <input hidden value="@Model.Id" name="RecipeId" id="RecipeId"/>
        <textarea id="Content" name="Content" class="form-control" placeholder="write a comment..." rows="3"></textarea>
        <label for="Rate" name="Rate">Rate</label>
        <select id="Rate" name="Rate">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <button type="submit" class="btn btn-green pull-right">Post</button>
    </form>
    @{
        await Html.RenderPartialAsync("_RecipeCommentsPartial", Model.CommentViewModels);
    }
</div>

</body>
